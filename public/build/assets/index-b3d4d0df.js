import{o as M,d as $,t as D,b as B,z as L,D as E,r as y,c as I,w as o,j as Q,Z as O,a as i,u as x,f as e,h as b,l as H,Y as R}from"./app-357601ec.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import{L as Y,w as V}from"./mermaid-cf784c66.js";import{L as A}from"./main-f072ef38.js";import{P as z}from"./page-header-6c4e3720.js";import{C as q}from"./flatpickr-4f8aff1c.js";import"./logo-light-5db129d6.js";let F=0;const k="webkit moz ms o".split(" ");let f,p;const G=typeof window>"u";if(G)f=function(){},p=function(){};else{f=window.requestAnimationFrame,p=window.cancelAnimationFrame;let t;for(let a=0;a<k.length&&!(f&&p);a++)t=k[a],f=f||window[t+"RequestAnimationFrame"],p=p||window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"];(!f||!p)&&(f=function(a){const r=new Date().getTime(),l=Math.max(0,16-(r-F)),m=window.setTimeout(()=>{a(r+l)},l);return F=r+l,m},p=function(a){window.clearTimeout(a)})}const K={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator(t){return t>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(t,a,r,l){return r*(-Math.pow(2,-10*t/l)+1)*1024/1023+a}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=f(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){p(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,f(this.count)},reset(){this.startTime=null,p(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(t){this.startTime||(this.startTime=t),this.timestamp=t;const a=t-this.startTime;this.remaining=this.localDuration-a,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(a,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(a,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(a/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(a/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),a<this.localDuration?this.rAF=f(this.count):this.$emit("callback")},isNumber(t){return!isNaN(parseFloat(t))},formatNumber(t){t=t.toFixed(this.decimals),t+="";const a=t.split(".");let r=a[0];const l=a.length>1?this.decimal+a[1]:"",m=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;m.test(r);)r=r.replace(m,"$1"+this.separator+"$2");return this.prefix+r+l+this.suffix}},destroyed(){p(this.rAF)}};function Z(t,a,r,l,m,_){return M(),$("span",null,D(m.displayValue),1)}const S=U(K,[["render",Z]]);function J(t,a,r){return a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function P(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);a&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),r.push.apply(r,l)}return r}S.unmounted=S.destroyed,Reflect.deleteProperty(S,"destroyed");var N=function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?P(Object(r),!0).forEach(function(l){J(t,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(r,l))})}return t}({name:"CountTo",emits:["callback","mountedCallback"]},S);const W={class:"d-flex justify-content-between"},X=e("p",{class:"fw-medium text-muted mb-0"},"Total Quantity this Month",-1),tt={class:"mt-4 ff-secondary fw-semibold"},et={class:"mb-0 text-muted"},at=e("i",{class:"ri-arrow-up-line align-middle"},null,-1),st=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-warning-subtle text-warning rounded-circle fs-4"},[e("i",{class:"ri-ticket-2-fill"})])])],-1),it={class:"d-flex justify-content-between"},rt=e("p",{class:"fw-medium text-muted mb-0"},"Total Sold this month",-1),nt={class:"mt-4 ff-secondary fw-semibold"},lt={class:"mb-0 text-muted"},ot=e("i",{class:"ri-arrow-up-line align-middle"},null,-1),dt=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-success-subtle text-success rounded-circle fs-4"},[e("i",{class:"ri-coupon-3-fill"})])])],-1),ut={class:"d-flex justify-content-between"},ct=e("p",{class:"fw-medium text-muted mb-0"},"Profit Margin this month",-1),ht={class:"mt-4 ff-secondary fw-semibold"},mt={class:"mb-0 text-muted"},ft=e("i",{class:"ri-arrow-up-line align-middle"},null,-1),pt=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-info-subtle text-info rounded-circle fs-4"},[e("i",{class:"ri-money-dollar-circle-line"})])])],-1),gt=e("div",{class:"d-flex align-items-center"},[e("h5",{class:"card-title mb-0 flex-grow-1"},"Purchase History")],-1),bt={class:"search-box"},_t=e("i",{class:"ri-search-line search-icon"},null,-1),wt=e("div",{class:"table-responsive table-card mb-4",id:"grid-table"},null,-1),yt={components:{Layout:A,PageHeader:z,Link:Q,Head:O,flatPickr:q}},Tt=Object.assign(yt,{__name:"index",props:{inventory:Array,totalQtyThisMonth:String,totalSoldThisMonth:String,totalProfitMarginThisMonth:String,percentageQtyChange:Number,percentageSoldChange:Number,percentageProfitMarginChange:Number},setup(t){const a=t,r=a.totalQtyThisMonth,l=B(""),m={wrap:!0,altFormat:"M j, Y",altInput:!0,dateFormat:"Y-m-d",mode:"range"},_=B("");let C=null;const j=()=>{let s=a.inventory;if(l.value){const[n,d]=l.value.split(" to ").map(u=>u.trim()),c=n?new Date(`${n} 00:00:00`):null,h=d?new Date(`${d} 23:59:59`):null;s=s.filter(u=>{if(!u.date||u.date==="N/A")return!1;const g=new Date(u.date);return(!c||g>=c)&&(!h||g<=h)})}if(_.value){const n=_.value.toLowerCase();s=s.filter(d=>{var c;return d.name.toLowerCase().includes(n)||d.venue.toLowerCase().includes(n)||((c=d.notes)==null?void 0:c.toLowerCase().includes(n))})}return s},T=()=>{C&&C.destroy(),C=new Y({columns:[{name:"Event ID",hidden:!0},{name:"Event Date",width:"120px",formatter:s=>{if(!s)return"N/A";const n=new Date(s);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(n)}},"Event Name","Venue","Quantity","Sold",{name:"%Profit Margin",formatter:s=>{if(s==null)return"N/A";let n="badge text-bg-secondary bg-light mb-0 text-dark",d="";return s>0?(n="badge bg-success-subtle text-success mb-0",d="ri-arrow-up-line align-middle"):s<0&&(n="badge bg-danger-subtle text-danger mb-0",d="ri-arrow-down-line align-middle"),V("span",{className:n},[d?V("i",{className:d}):null,` ${s} %`])}},{id:"actionsColumn",name:"Links",align:"center",width:"150px",formatter:(s,n)=>{var u,g,v,w;const d=((g=(u=n.cells[7])==null?void 0:u.data)==null?void 0:g.trim())||"",c=((w=(v=n.cells[8])==null?void 0:v.data)==null?void 0:w.trim())||"",h=[];return d!==""&&h.push(V("a",{href:d,className:"badge bg-success text-uppercase text-white",target:"_blank",rel:"noopener noreferrer"},"StubHub")),c!==""&&h.push(V("a",{href:c,className:"badge bg-warning text-uppercase text-dark",target:"_blank",rel:"noopener noreferrer"},"Vivid")),V("div",{className:"d-flex gap-2"},h)},sort:!1},{name:"updated",hidden:!0}],data:j().sort((s,n)=>new Date(n.date)-new Date(s.date)).map(s=>{var n,d;return[s.event_id,s.date,s.name,s.venue,s.qty,s.sold,s.profit_margin,((n=s.stubhub_url)==null?void 0:n.trim())||"",((d=s.vivid_url)==null?void 0:d.trim())||""]}),pagination:{limit:20},search:!1,sort:!1,theme:"mermaid"}).render(document.getElementById("grid-table"))};return L([l,_],T),E(()=>{T()}),(s,n)=>{const d=y("BBadge"),c=y("BCardBody"),h=y("BCard"),u=y("BCol"),g=y("BRow"),v=y("BCardHeader");return M(),I(A,null,{default:o(()=>[i(x(O),{title:"Inventory"}),i(g,null,{default:o(()=>[i(u,{xxl:"3",sm:"6"},{default:o(()=>[i(h,{"no-body":"",class:"card-animate"},{default:o(()=>[i(c,null,{default:o(()=>[e("div",W,[e("div",null,[X,e("h2",tt,[i(x(N),{duration:3e3,startVal:0,endVal:parseInt(x(r))},null,8,["endVal"])]),e("p",et,[i(d,{class:"bg-light text-success mb-0"},{default:o(()=>[at,b(" "+D(t.percentageQtyChange)+" % ",1)]),_:1}),b(" vs. previous month ")])]),st])]),_:1})]),_:1})]),_:1}),i(u,{xxl:"3",sm:"6"},{default:o(()=>[i(h,{"no-body":"",class:"card-animate"},{default:o(()=>[i(c,null,{default:o(()=>[e("div",it,[e("div",null,[rt,e("h2",nt,[i(x(N),{duration:5e3,startVal:0,endVal:parseInt(t.totalSoldThisMonth)},null,8,["endVal"])]),e("p",lt,[i(d,{class:"bg-light text-success mb-0"},{default:o(()=>[ot,b(" "+D(t.percentageSoldChange)+"% ",1)]),_:1}),b(" vs. previous month ")])]),dt])]),_:1})]),_:1})]),_:1}),i(u,{xxl:"3",sm:"6"},{default:o(()=>[i(h,{"no-body":"",class:"card-animate"},{default:o(()=>[i(c,null,{default:o(()=>[e("div",ut,[e("div",null,[ct,e("h2",ht,[i(x(N),{duration:7e3,startVal:0,endVal:parseInt(t.totalProfitMarginThisMonth),decimals:2},null,8,["endVal"]),b("% ")]),e("p",mt,[i(d,{class:"bg-light text-success mb-0"},{default:o(()=>[ft,b(" "+D(t.percentageProfitMarginChange)+"% ",1)]),_:1}),b(" vs. previous month ")])]),pt])]),_:1})]),_:1})]),_:1})]),_:1}),i(g,null,{default:o(()=>[i(u,{lg:"12"},{default:o(()=>[i(h,{"no-body":"",id:"ticketsList"},{default:o(()=>[i(v,{class:"border-0"},{default:o(()=>[gt]),_:1}),i(c,{class:"border border-dashed border-end-0 border-start-0"},{default:o(()=>[e("form",null,[i(g,{class:"g-3"},{default:o(()=>[i(u,{xxl:"5",sm:"12"},{default:o(()=>[e("div",bt,[H(e("input",{type:"text",class:"form-control search bg-light border-light",placeholder:"Search for ticket details or something...","onUpdate:modelValue":n[0]||(n[0]=w=>_.value=w)},null,512),[[R,_.value]]),_t])]),_:1}),i(u,{xxl:"3",sm:"4"},{default:o(()=>[i(x(q),{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=w=>l.value=w),config:m,class:"form-control bg-light border-light",placeholder:"Select date range"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),i(c,{class:"border border-dashed border-end-0 border-start-0"},{default:o(()=>[wt]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Tt as default};
