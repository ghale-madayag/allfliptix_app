import{b as B,z as P,D as T,r as h,c as L,w as l,j as I,Z as D,o as j,a,u as _,f as t,h as c,t as v,l as Q,Y as F}from"./app-9f070ba6.js";import{C as w}from"./vue3-count-to.esm-449acd0d.js";import{L as H,w as u}from"./mermaid-cf784c66.js";import{L as V}from"./main-2d187f87.js";import{P as U}from"./page-header-2019dbe3.js";import{C as M}from"./flatpickr-8bb6368c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logo-light-5db129d6.js";const A={class:"d-flex justify-content-between"},E=t("p",{class:"fw-medium text-muted mb-0"},"Total Quantity this Month",-1),Y={class:"mt-4 ff-secondary fw-semibold"},$={class:"mb-0 text-muted"},q=t("i",{class:"ri-arrow-up-line align-middle"},null,-1),R=t("div",null,[t("div",{class:"avatar-sm flex-shrink-0"},[t("span",{class:"avatar-title bg-warning-subtle text-warning rounded-circle fs-4"},[t("i",{class:"ri-ticket-2-fill"})])])],-1),z={class:"d-flex justify-content-between"},G=t("p",{class:"fw-medium text-muted mb-0"},"Total Sold this month",-1),O={class:"mt-4 ff-secondary fw-semibold"},Z={class:"mb-0 text-muted"},J=t("i",{class:"ri-arrow-up-line align-middle"},null,-1),K=t("div",null,[t("div",{class:"avatar-sm flex-shrink-0"},[t("span",{class:"avatar-title bg-success-subtle text-success rounded-circle fs-4"},[t("i",{class:"ri-coupon-3-fill"})])])],-1),W={class:"d-flex justify-content-between"},X=t("p",{class:"fw-medium text-muted mb-0"},"Profit Margin this month",-1),tt={class:"mt-4 ff-secondary fw-semibold"},et={class:"mb-0 text-muted"},at=t("i",{class:"ri-arrow-up-line align-middle"},null,-1),st=t("div",null,[t("div",{class:"avatar-sm flex-shrink-0"},[t("span",{class:"avatar-title bg-info-subtle text-info rounded-circle fs-4"},[t("i",{class:"ri-money-dollar-circle-line"})])])],-1),lt=t("div",{class:"d-flex align-items-center"},[t("h5",{class:"card-title mb-0 flex-grow-1"},"Purchase History")],-1),nt={class:"search-box"},ot=t("i",{class:"ri-search-line search-icon"},null,-1),rt=t("div",{class:"table-responsive table-card mb-4",id:"grid-table"},null,-1),it={components:{Layout:V,PageHeader:U,Link:I,Head:D,flatPickr:M}},bt=Object.assign(it,{__name:"index",props:{inventory:Array,totalQtyThisMonth:String,totalSoldThisMonth:String,totalProfitMarginThisMonth:String,percentageQtyChange:Number,percentageSoldChange:Number,percentageProfitMarginChange:Number},setup(m){const y=m,N=y.totalQtyThisMonth,g=B(""),S={wrap:!0,altFormat:"M j, Y",altInput:!0,dateFormat:"Y-m-d",mode:"range"},b=B("");let x=null;const k=()=>{let e=y.inventory;if(g.value){const[s,n]=g.value.split(" to ").map(o=>o.trim()),r=s?new Date(`${s} 00:00:00`):null,i=n?new Date(`${n} 23:59:59`):null;e=e.filter(o=>{if(!o.date||o.date==="N/A")return!1;const d=new Date(o.date);return(!r||d>=r)&&(!i||d<=i)})}if(b.value){const s=b.value.toLowerCase();e=e.filter(n=>{var r;return n.name.toLowerCase().includes(s)||n.venue.toLowerCase().includes(s)||((r=n.notes)==null?void 0:r.toLowerCase().includes(s))})}return e},C=()=>{x&&x.destroy(),x=new H({columns:[{name:"Event ID",hidden:!0},{name:"Event Name",width:"250px"},{name:"Event Date",width:"120px",formatter:e=>{if(!e)return"N/A";const s=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(s)}},"Venue","1 day Profit","3 days Profit","7 days Profit","Listing","Sold",{name:"%Profit Margin",formatter:e=>{if(e==null)return"N/A";let s="badge text-bg-secondary bg-light mb-0 text-dark",n="";return e>0?(s="badge bg-success-subtle text-success mb-0",n="ri-arrow-up-line align-middle"):e<0&&(s="badge bg-danger-subtle text-danger mb-0",n="ri-arrow-down-line align-middle"),u("span",{className:s},[n?u("i",{className:n}):null,` ${e}`])}},{id:"actionsColumn",name:"Links",align:"center",width:"60px",formatter:(e,s)=>{var o,d,p,f;const n=((d=(o=s.cells[10])==null?void 0:o.data)==null?void 0:d.trim())||"",r=((f=(p=s.cells[11])==null?void 0:p.data)==null?void 0:f.trim())||"",i=[];return n!==""&&i.push(u("a",{href:n,className:"text-success fs-5",target:"_blank",rel:"noopener noreferrer",title:"Stubhub"},u("i",{className:"ri-coupon-2-fill"}))),r!==""&&i.push(u("a",{href:r,className:"text-warning fs-5",target:"_blank",rel:"noopener noreferrer",title:"Vivid"},u("i",{className:"ri-coupon-2-fill"}))),u("div",{className:"d-flex gap-2 justify-content-left"},i)},sort:!1},{name:"updated",hidden:!0}],data:k().sort((e,s)=>new Date(s.date)-new Date(e.date)).map(e=>{var s,n;return[e.event_id,e.name,e.date,e.venue,e.avg_sold_1d,e.avg_sold_3d,e.avg_sold_7d,e.qty,e.sold,e.profit_margin,((s=e.stubhub_url)==null?void 0:s.trim())||"",((n=e.vivid_url)==null?void 0:n.trim())||""]}),pagination:{limit:100},search:!1,sort:!0,theme:"mermaid"}).render(document.getElementById("grid-table"))};return P([g,b],C),T(()=>{C()}),(e,s)=>{const n=h("BBadge"),r=h("BCardBody"),i=h("BCard"),o=h("BCol"),d=h("BRow"),p=h("BCardHeader");return j(),L(V,null,{default:l(()=>[a(_(D),{title:"Inventory"}),a(d,null,{default:l(()=>[a(o,{xxl:"3",sm:"6"},{default:l(()=>[a(i,{"no-body":"",class:"card-animate"},{default:l(()=>[a(r,null,{default:l(()=>[t("div",A,[t("div",null,[E,t("h2",Y,[a(_(w),{duration:3e3,startVal:0,endVal:parseInt(_(N))},null,8,["endVal"])]),t("p",$,[a(n,{class:"bg-light text-success mb-0"},{default:l(()=>[q,c(" "+v(m.percentageQtyChange)+" % ",1)]),_:1}),c(" vs. previous month ")])]),R])]),_:1})]),_:1})]),_:1}),a(o,{xxl:"3",sm:"6"},{default:l(()=>[a(i,{"no-body":"",class:"card-animate"},{default:l(()=>[a(r,null,{default:l(()=>[t("div",z,[t("div",null,[G,t("h2",O,[a(_(w),{duration:5e3,startVal:0,endVal:parseInt(m.totalSoldThisMonth)},null,8,["endVal"])]),t("p",Z,[a(n,{class:"bg-light text-success mb-0"},{default:l(()=>[J,c(" "+v(m.percentageSoldChange)+"% ",1)]),_:1}),c(" vs. previous month ")])]),K])]),_:1})]),_:1})]),_:1}),a(o,{xxl:"3",sm:"6"},{default:l(()=>[a(i,{"no-body":"",class:"card-animate"},{default:l(()=>[a(r,null,{default:l(()=>[t("div",W,[t("div",null,[X,t("h2",tt,[a(_(w),{duration:7e3,startVal:0,endVal:parseFloat(m.totalProfitMarginThisMonth),decimals:2},null,8,["endVal"]),c("% ")]),t("p",et,[a(n,{class:"bg-light text-success mb-0"},{default:l(()=>[at,c(" "+v(m.percentageProfitMarginChange)+"% ",1)]),_:1}),c(" vs. previous month ")])]),st])]),_:1})]),_:1})]),_:1})]),_:1}),a(d,null,{default:l(()=>[a(o,{lg:"12"},{default:l(()=>[a(i,{"no-body":"",id:"ticketsList"},{default:l(()=>[a(p,{class:"border-0"},{default:l(()=>[lt]),_:1}),a(r,{class:"border border-dashed border-end-0 border-start-0"},{default:l(()=>[t("form",null,[a(d,{class:"g-3"},{default:l(()=>[a(o,{xxl:"5",sm:"12"},{default:l(()=>[t("div",nt,[Q(t("input",{type:"text",class:"form-control search bg-light border-light",placeholder:"Search for ticket details or something...","onUpdate:modelValue":s[0]||(s[0]=f=>b.value=f)},null,512),[[F,b.value]]),ot])]),_:1}),a(o,{xxl:"3",sm:"4"},{default:l(()=>[a(_(M),{modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=f=>g.value=f),config:S,class:"form-control bg-light border-light",placeholder:"Select date range"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),a(r,{class:"border border-dashed border-end-0 border-start-0"},{default:l(()=>[rt]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{bt as default};
