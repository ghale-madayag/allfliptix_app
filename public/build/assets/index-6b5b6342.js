import{b as S,z as A,D as I,r as h,c as j,w as n,j as F,Z as B,o as H,a as s,u as m,f as e,h as k,l as U,Y as E}from"./app-2db7b66b.js";import{C as p}from"./vue3-count-to.esm-a5e8f687.js";import{L as Q,w as c}from"./mermaid-cf784c66.js";import{L as N}from"./main-9a865467.js";import{P as $}from"./page-header-6dd4d44c.js";import{C as M}from"./flatpickr-d6da82e2.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logo-light-5db129d6.js";const Y={class:"d-flex justify-content-between"},q=e("p",{class:"fw-medium text-muted mb-0"},"Total Sold this month",-1),z={class:"mt-4 ff-secondary fw-semibold"},R=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-success-subtle text-success rounded-circle fs-4"},[e("i",{class:"ri-coupon-3-fill"})])])],-1),G={class:"d-flex justify-content-between"},O=e("p",{class:"fw-medium text-muted mb-0"},"Total Profit this Month",-1),Z={class:"mt-4 ff-secondary fw-semibold"},J=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-warning-subtle text-warning rounded-circle fs-4"},[e("i",{class:"ri-ticket-2-fill"})])])],-1),K={class:"d-flex justify-content-between"},W=e("p",{class:"fw-medium text-muted mb-0"},"Profit Margin this month",-1),X={class:"mt-4 ff-secondary fw-semibold"},tt=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-info-subtle text-info rounded-circle fs-4"},[e("i",{class:"ri-money-dollar-circle-line"})])])],-1),et=e("div",{class:"d-flex align-items-center"},[e("h5",{class:"card-title mb-0 flex-grow-1"},"Purchase History")],-1),at={class:"search-box"},st=e("i",{class:"ri-search-line search-icon"},null,-1),lt=e("div",{class:"table-responsive table-card mb-4",id:"grid-table"},null,-1),nt={components:{Layout:N,PageHeader:$,Link:F,Head:B,flatPickr:M}},_t=Object.assign(nt,{__name:"index",props:{inventory:Array,totalQtyThisMonth:String,totalSoldThisMonth:String,totalProfitMarginThisMonth:String},setup(g){const v=g,T=v.totalQtyThisMonth,f=S(""),L={wrap:!0,altFormat:"M j, Y",altInput:!0,dateFormat:"Y-m-d",mode:"range"},_=S("");let b=null;const P=()=>{let t=v.inventory;if(f.value){const[a,l]=f.value.split(" to ").map(d=>d.trim()),o=a?new Date(`${a} 00:00:00`):null,r=l?new Date(`${l} 23:59:59`):null;t=t.filter(d=>{if(!d.date||d.date==="N/A")return!1;const i=new Date(d.date);return(!o||i>=o)&&(!r||i<=r)})}if(_.value){const a=_.value.toLowerCase();t=t.filter(l=>{var o;return l.name.toLowerCase().includes(a)||l.venue.toLowerCase().includes(a)||((o=l.notes)==null?void 0:o.toLowerCase().includes(a))})}return t},x=()=>{b&&b.destroy(),b=new Q({columns:[{name:"Event ID",hidden:!0},{name:"Event Name"},{name:"Event Date",formatter:t=>{if(!t)return"N/A";const a=new Date(t);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(a)}},"Venue","1 day Avg. Sale","3 days Avg. Sale","7 days Avg. Sale","30 days Avg. Sale","Listing","Sold",{name:"%Profit Margin",formatter:t=>{if(t==null)return"N/A";let a="badge text-bg-secondary bg-light mb-0 text-dark",l="";return t>0?(a="badge bg-success-subtle text-success mb-0",l="ri-arrow-up-line align-middle"):t<0&&(a="badge bg-danger-subtle text-danger mb-0",l="ri-arrow-down-line align-middle"),c("span",{className:a},[l?c("i",{className:l}):null,` ${t}`])}},{id:"actionsColumn",name:"Links",align:"center",width:"80px",formatter:(t,a)=>{var u,y,w,C,D,V;const l=((y=(u=a.cells[11])==null?void 0:u.data)==null?void 0:y.trim())||"",o=((C=(w=a.cells[12])==null?void 0:w.data)==null?void 0:C.trim())||"",r="/inventory/"+((D=a.cells[0])==null?void 0:D.data),d=(V=a.cells[9])==null?void 0:V.data,i=[];return l!==""&&i.push(c("a",{href:l,className:"text-success fs-5",target:"_blank",rel:"noopener noreferrer",title:"Stubhub"},c("i",{className:"ri-coupon-2-fill"}))),o!==""&&i.push(c("a",{href:o,className:"text-warning fs-5",target:"_blank",rel:"noopener noreferrer",title:"Vivid"},c("i",{className:"ri-coupon-2-fill"}))),d>0&&i.push(c("a",{href:r,target:"_blank",className:"text-danger fs-5",title:"View Sold Inventory"},c("i",{className:"ri-database-2-fill"}))),c("div",{className:"d-flex gap-2 justify-content-left"},i)},sort:!1},{name:"updated",hidden:!0}],data:P().sort((t,a)=>new Date(a.date)-new Date(t.date)).map(t=>{var a,l;return[t.event_id,t.name,t.date,t.venue,t.avg_sold_1d,t.avg_sold_3d,t.avg_sold_7d,t.avg_sold_30d,t.qty,t.sold,t.profit_margin,((a=t.stubhub_url)==null?void 0:a.trim())||"",((l=t.vivid_url)==null?void 0:l.trim())||""]}),pagination:{limit:100},search:!1,sort:!0,theme:"mermaid",resizable:!0}).render(document.getElementById("grid-table"))};return A([f,_],x),I(()=>{x()}),(t,a)=>{const l=h("BCardBody"),o=h("BCard"),r=h("BCol"),d=h("BRow"),i=h("BCardHeader");return H(),j(N,null,{default:n(()=>[s(m(B),{title:"Inventory"}),s(d,null,{default:n(()=>[s(r,{xxl:"3",sm:"6"},{default:n(()=>[s(o,{"no-body":"",class:"card-animate"},{default:n(()=>[s(l,null,{default:n(()=>[e("div",Y,[e("div",null,[q,e("h2",z,[s(m(p),{duration:5e3,startVal:0,endVal:parseInt(g.totalSoldThisMonth)},null,8,["endVal"])])]),R])]),_:1})]),_:1})]),_:1}),s(r,{xxl:"3",sm:"6"},{default:n(()=>[s(o,{"no-body":"",class:"card-animate"},{default:n(()=>[s(l,null,{default:n(()=>[e("div",G,[e("div",null,[O,e("h2",Z,[k(" $"),s(m(p),{duration:3e3,startVal:0,endVal:parseFloat(m(T)),decimals:2},null,8,["endVal"])])]),J])]),_:1})]),_:1})]),_:1}),s(r,{xxl:"3",sm:"6"},{default:n(()=>[s(o,{"no-body":"",class:"card-animate"},{default:n(()=>[s(l,null,{default:n(()=>[e("div",K,[e("div",null,[W,e("h2",X,[s(m(p),{duration:7e3,startVal:0,endVal:parseFloat(g.totalProfitMarginThisMonth),decimals:2},null,8,["endVal"]),k("% ")])]),tt])]),_:1})]),_:1})]),_:1})]),_:1}),s(d,null,{default:n(()=>[s(r,{lg:"12"},{default:n(()=>[s(o,{"no-body":"",id:"ticketsList"},{default:n(()=>[s(i,{class:"border-0"},{default:n(()=>[et]),_:1}),s(l,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[e("form",null,[s(d,{class:"g-3"},{default:n(()=>[s(r,{xxl:"5",sm:"12"},{default:n(()=>[e("div",at,[U(e("input",{type:"text",class:"form-control search bg-light border-light",placeholder:"Search for ticket details or something...","onUpdate:modelValue":a[0]||(a[0]=u=>_.value=u)},null,512),[[E,_.value]]),st])]),_:1}),s(r,{xxl:"3",sm:"4"},{default:n(()=>[s(m(M),{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=u=>f.value=u),config:L,class:"form-control bg-light border-light",placeholder:"Select date range"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),s(l,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[lt]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{_t as default};
