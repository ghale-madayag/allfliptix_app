import{b as S,z as I,D as j,r as h,c as F,w as n,j as H,Z as B,O as U,o as E,a as s,u as m,f as e,h as k,l as Q,Y as $}from"./app-827061f0.js";import{C as p}from"./vue3-count-to.esm-8bf6ffc6.js";import{L as O,w as c}from"./mermaid-cf784c66.js";import{L as N}from"./main-10d7054a.js";import{P as Y}from"./page-header-900de32d.js";import{C as M}from"./flatpickr-b053b29f.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logo-light-5db129d6.js";const q={class:"d-flex justify-content-between"},z=e("p",{class:"fw-medium text-muted mb-0"},"Total Sold this month",-1),R={class:"mt-4 ff-secondary fw-semibold"},G=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-success-subtle text-success rounded-circle fs-4"},[e("i",{class:"ri-coupon-3-fill"})])])],-1),Z={class:"d-flex justify-content-between"},J=e("p",{class:"fw-medium text-muted mb-0"},"Total Profit this Month",-1),K={class:"mt-4 ff-secondary fw-semibold"},W=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-warning-subtle text-warning rounded-circle fs-4"},[e("i",{class:"ri-ticket-2-fill"})])])],-1),X={class:"d-flex justify-content-between"},tt=e("p",{class:"fw-medium text-muted mb-0"},"Profit Margin this month",-1),et={class:"mt-4 ff-secondary fw-semibold"},at=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-info-subtle text-info rounded-circle fs-4"},[e("i",{class:"ri-money-dollar-circle-line"})])])],-1),st=e("div",{class:"d-flex align-items-center"},[e("h5",{class:"card-title mb-0 flex-grow-1"},"Purchase History")],-1),lt={class:"search-box"},nt=e("i",{class:"ri-search-line search-icon"},null,-1),ot=e("div",{class:"table-responsive table-card mb-4",id:"grid-table"},null,-1),rt={components:{Layout:N,PageHeader:Y,Link:H,Head:B,flatPickr:M}},gt=Object.assign(rt,{__name:"index",props:{inventory:Array,totalQtyThisMonth:String,totalSoldThisMonth:String,totalProfitMarginThisMonth:String},setup(g){const v=g,T=v.totalQtyThisMonth,f=S(""),L={wrap:!0,altFormat:"M j, Y",altInput:!0,dateFormat:"Y-m-d",mode:"range"},_=S("");let b=null;const P=()=>{let t=v.inventory;if(f.value){const[a,l]=f.value.split(" to ").map(i=>i.trim()),o=a?new Date(`${a} 00:00:00`):null,r=l?new Date(`${l} 23:59:59`):null;t=t.filter(i=>{if(!i.date||i.date==="N/A")return!1;const d=new Date(i.date);return(!o||d>=o)&&(!r||d<=r)})}if(_.value){const a=_.value.toLowerCase();t=t.filter(l=>{var o;return l.name.toLowerCase().includes(a)||l.venue.toLowerCase().includes(a)||((o=l.notes)==null?void 0:o.toLowerCase().includes(a))})}return t},x=()=>{b&&b.destroy(),b=new O({columns:[{name:"Event ID",hidden:!0},{name:"Event Name"},{name:"Event Date",formatter:t=>{if(!t)return"N/A";const a=new Date(t);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(a)}},"Venue","1 day Avg. Sale","3 days Avg. Sale","7 days Avg. Sale","30 days Avg. Sale","Listing","Sold",{name:"%Profit Margin",formatter:t=>{if(t==null)return"N/A";let a="badge text-bg-secondary bg-light mb-0 text-dark",l="";return t>0?(a="badge bg-success-subtle text-success mb-0",l="ri-arrow-up-line align-middle"):t<0&&(a="badge bg-danger-subtle text-danger mb-0",l="ri-arrow-down-line align-middle"),c("span",{className:a},[l?c("i",{className:l}):null,` ${t}`])}},{id:"actionsColumn",name:"Links",align:"center",width:"80px",formatter:(t,a)=>{var u,y,w,C,D,V;const l=((y=(u=a.cells[10])==null?void 0:u.data)==null?void 0:y.trim())||"",o=((C=(w=a.cells[11])==null?void 0:w.data)==null?void 0:C.trim())||"",r="/inventory/"+((D=a.cells[0])==null?void 0:D.data),i=(V=a.cells[8])==null?void 0:V.data,d=[];return l!==""&&d.push(c("a",{href:l,className:"text-success fs-5",target:"_blank",rel:"noopener noreferrer",title:"Stubhub"},c("i",{className:"ri-coupon-2-fill"}))),o!==""&&d.push(c("a",{href:o,className:"text-warning fs-5",target:"_blank",rel:"noopener noreferrer",title:"Vivid"},c("i",{className:"ri-coupon-2-fill"}))),i>0&&d.push(c("a",{href:"#",className:"text-danger fs-5",title:"View Sold Inventory",onclick:A=>{A.preventDefault(),U.visit(r)}},c("i",{className:"ri-database-2-fill"}))),c("div",{className:"d-flex gap-2 justify-content-left"},d)},sort:!1},{name:"updated",hidden:!0}],data:P().sort((t,a)=>new Date(a.date)-new Date(t.date)).map(t=>{var a,l;return[t.event_id,t.name,t.date,t.venue,t.avg_sold_1d,t.avg_sold_3d,t.avg_sold_7d,t.avg_sold_30d,t.qty,t.sold,t.profit_margin,((a=t.stubhub_url)==null?void 0:a.trim())||"",((l=t.vivid_url)==null?void 0:l.trim())||""]}),pagination:{limit:100},search:!1,sort:!0,theme:"mermaid",resizable:!0}).render(document.getElementById("grid-table"))};return I([f,_],x),j(()=>{x()}),(t,a)=>{const l=h("BCardBody"),o=h("BCard"),r=h("BCol"),i=h("BRow"),d=h("BCardHeader");return E(),F(N,null,{default:n(()=>[s(m(B),{title:"Inventory"}),s(i,null,{default:n(()=>[s(r,{xxl:"3",sm:"6"},{default:n(()=>[s(o,{"no-body":"",class:"card-animate"},{default:n(()=>[s(l,null,{default:n(()=>[e("div",q,[e("div",null,[z,e("h2",R,[s(m(p),{duration:5e3,startVal:0,endVal:parseInt(g.totalSoldThisMonth)},null,8,["endVal"])])]),G])]),_:1})]),_:1})]),_:1}),s(r,{xxl:"3",sm:"6"},{default:n(()=>[s(o,{"no-body":"",class:"card-animate"},{default:n(()=>[s(l,null,{default:n(()=>[e("div",Z,[e("div",null,[J,e("h2",K,[k(" $"),s(m(p),{duration:3e3,startVal:0,endVal:parseFloat(m(T)),decimals:2},null,8,["endVal"])])]),W])]),_:1})]),_:1})]),_:1}),s(r,{xxl:"3",sm:"6"},{default:n(()=>[s(o,{"no-body":"",class:"card-animate"},{default:n(()=>[s(l,null,{default:n(()=>[e("div",X,[e("div",null,[tt,e("h2",et,[s(m(p),{duration:7e3,startVal:0,endVal:parseFloat(g.totalProfitMarginThisMonth),decimals:2},null,8,["endVal"]),k("% ")])]),at])]),_:1})]),_:1})]),_:1})]),_:1}),s(i,null,{default:n(()=>[s(r,{lg:"12"},{default:n(()=>[s(o,{"no-body":"",id:"ticketsList"},{default:n(()=>[s(d,{class:"border-0"},{default:n(()=>[st]),_:1}),s(l,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[e("form",null,[s(i,{class:"g-3"},{default:n(()=>[s(r,{xxl:"5",sm:"12"},{default:n(()=>[e("div",lt,[Q(e("input",{type:"text",class:"form-control search bg-light border-light",placeholder:"Search for ticket details or something...","onUpdate:modelValue":a[0]||(a[0]=u=>_.value=u)},null,512),[[$,_.value]]),nt])]),_:1}),s(r,{xxl:"3",sm:"4"},{default:n(()=>[s(m(M),{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=u=>f.value=u),config:L,class:"form-control bg-light border-light",placeholder:"Select date range"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),s(l,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[ot]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{gt as default};
