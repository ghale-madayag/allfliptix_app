import{o as M,d as $,t as D,b as F,z as L,D as E,r as x,c as I,w as o,j as Q,Z as O,a as i,u as V,f as e,h as b,l as R,Y as H}from"./app-49b919ca.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import{L as Y,w as _}from"./mermaid-cf784c66.js";import{L as A}from"./main-80095b31.js";import{P as z}from"./page-header-d39922c4.js";import{C as q}from"./flatpickr-92e53b0b.js";import"./logo-light-5db129d6.js";let B=0;const P="webkit moz ms o".split(" ");let f,p;const G=typeof window>"u";if(G)f=function(){},p=function(){};else{f=window.requestAnimationFrame,p=window.cancelAnimationFrame;let t;for(let a=0;a<P.length&&!(f&&p);a++)t=P[a],f=f||window[t+"RequestAnimationFrame"],p=p||window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"];(!f||!p)&&(f=function(a){const l=new Date().getTime(),r=Math.max(0,16-(l-B)),h=window.setTimeout(()=>{a(l+r)},r);return B=l+r,h},p=function(a){window.clearTimeout(a)})}const K={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator(t){return t>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(t,a,l,r){return l*(-Math.pow(2,-10*t/r)+1)*1024/1023+a}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=f(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){p(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,f(this.count)},reset(){this.startTime=null,p(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(t){this.startTime||(this.startTime=t),this.timestamp=t;const a=t-this.startTime;this.remaining=this.localDuration-a,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(a,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(a,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(a/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(a/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),a<this.localDuration?this.rAF=f(this.count):this.$emit("callback")},isNumber(t){return!isNaN(parseFloat(t))},formatNumber(t){t=t.toFixed(this.decimals),t+="";const a=t.split(".");let l=a[0];const r=a.length>1?this.decimal+a[1]:"",h=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;h.test(l);)l=l.replace(h,"$1"+this.separator+"$2");return this.prefix+l+r+this.suffix}},destroyed(){p(this.rAF)}};function Z(t,a,l,r,h,w){return M(),$("span",null,D(h.displayValue),1)}const S=U(K,[["render",Z]]);function J(t,a,l){return a in t?Object.defineProperty(t,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[a]=l,t}function k(t,a){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(h){return Object.getOwnPropertyDescriptor(t,h).enumerable})),l.push.apply(l,r)}return l}S.unmounted=S.destroyed,Reflect.deleteProperty(S,"destroyed");var N=function(t){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?k(Object(l),!0).forEach(function(r){J(t,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):k(Object(l)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(l,r))})}return t}({name:"CountTo",emits:["callback","mountedCallback"]},S);const W={class:"d-flex justify-content-between"},X=e("p",{class:"fw-medium text-muted mb-0"},"Total Quantity this Month",-1),tt={class:"mt-4 ff-secondary fw-semibold"},et={class:"mb-0 text-muted"},at=e("i",{class:"ri-arrow-up-line align-middle"},null,-1),st=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-warning-subtle text-warning rounded-circle fs-4"},[e("i",{class:"ri-ticket-2-fill"})])])],-1),it={class:"d-flex justify-content-between"},lt=e("p",{class:"fw-medium text-muted mb-0"},"Total Sold this month",-1),nt={class:"mt-4 ff-secondary fw-semibold"},rt={class:"mb-0 text-muted"},ot=e("i",{class:"ri-arrow-up-line align-middle"},null,-1),dt=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-success-subtle text-success rounded-circle fs-4"},[e("i",{class:"ri-coupon-3-fill"})])])],-1),ut={class:"d-flex justify-content-between"},ct=e("p",{class:"fw-medium text-muted mb-0"},"Profit Margin this month",-1),mt={class:"mt-4 ff-secondary fw-semibold"},ht={class:"mb-0 text-muted"},ft=e("i",{class:"ri-arrow-up-line align-middle"},null,-1),pt=e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-info-subtle text-info rounded-circle fs-4"},[e("i",{class:"ri-money-dollar-circle-line"})])])],-1),gt=e("div",{class:"d-flex align-items-center"},[e("h5",{class:"card-title mb-0 flex-grow-1"},"Purchase History")],-1),bt={class:"search-box"},_t=e("i",{class:"ri-search-line search-icon"},null,-1),wt=e("div",{class:"table-responsive table-card mb-4",id:"grid-table"},null,-1),yt={components:{Layout:A,PageHeader:z,Link:Q,Head:O,flatPickr:q}},Tt=Object.assign(yt,{__name:"index",props:{inventory:Array,totalQtyThisMonth:String,totalSoldThisMonth:String,totalProfitMarginThisMonth:String,percentageQtyChange:Number,percentageSoldChange:Number,percentageProfitMarginChange:Number},setup(t){const a=t,l=a.totalQtyThisMonth,r=F(""),h={wrap:!0,altFormat:"M j, Y",altInput:!0,dateFormat:"Y-m-d",mode:"range"},w=F("");let C=null;const j=()=>{let s=a.inventory;if(r.value){const[n,d]=r.value.split(" to ").map(u=>u.trim()),c=n?new Date(`${n} 00:00:00`):null,m=d?new Date(`${d} 23:59:59`):null;s=s.filter(u=>{if(!u.date||u.date==="N/A")return!1;const g=new Date(u.date);return(!c||g>=c)&&(!m||g<=m)})}if(w.value){const n=w.value.toLowerCase();s=s.filter(d=>{var c;return d.name.toLowerCase().includes(n)||d.venue.toLowerCase().includes(n)||((c=d.notes)==null?void 0:c.toLowerCase().includes(n))})}return s},T=()=>{C&&C.destroy(),C=new Y({columns:[{name:"Event ID",hidden:!0},{name:"Event Name",width:"250px"},{name:"Event Date",width:"120px",formatter:s=>{if(!s)return"N/A";const n=new Date(s);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(n)}},"Venue","Qty","Sold",{name:"%Profit Margin",formatter:s=>{if(s==null)return"N/A";let n="badge text-bg-secondary bg-light mb-0 text-dark",d="";return s>0?(n="badge bg-success-subtle text-success mb-0",d="ri-arrow-up-line align-middle"):s<0&&(n="badge bg-danger-subtle text-danger mb-0",d="ri-arrow-down-line align-middle"),_("span",{className:n},[d?_("i",{className:d}):null,` ${s}`])}},{id:"actionsColumn",name:"Links",align:"center",width:"60px",formatter:(s,n)=>{var u,g,v,y;const d=((g=(u=n.cells[7])==null?void 0:u.data)==null?void 0:g.trim())||"",c=((y=(v=n.cells[8])==null?void 0:v.data)==null?void 0:y.trim())||"",m=[];return d!==""&&m.push(_("a",{href:d,className:"text-success fs-5",target:"_blank",rel:"noopener noreferrer",title:"Stubhub"},_("i",{className:"ri-coupon-2-fill"}))),c!==""&&m.push(_("a",{href:c,className:"text-warning fs-5",target:"_blank",rel:"noopener noreferrer",title:"Vivid"},_("i",{className:"ri-coupon-2-fill"}))),_("div",{className:"d-flex gap-2 justify-content-left"},m)},sort:!1},{name:"updated",hidden:!0}],data:j().sort((s,n)=>new Date(n.date)-new Date(s.date)).map(s=>{var n,d;return[s.event_id,s.name,s.date,s.venue,s.qty,s.sold,s.profit_margin,((n=s.stubhub_url)==null?void 0:n.trim())||"",((d=s.vivid_url)==null?void 0:d.trim())||""]}),pagination:{limit:100},search:!1,sort:!0,theme:"mermaid"}).render(document.getElementById("grid-table"))};return L([r,w],T),E(()=>{T()}),(s,n)=>{const d=x("BBadge"),c=x("BCardBody"),m=x("BCard"),u=x("BCol"),g=x("BRow"),v=x("BCardHeader");return M(),I(A,null,{default:o(()=>[i(V(O),{title:"Inventory"}),i(g,null,{default:o(()=>[i(u,{xxl:"3",sm:"6"},{default:o(()=>[i(m,{"no-body":"",class:"card-animate"},{default:o(()=>[i(c,null,{default:o(()=>[e("div",W,[e("div",null,[X,e("h2",tt,[i(V(N),{duration:3e3,startVal:0,endVal:parseInt(V(l))},null,8,["endVal"])]),e("p",et,[i(d,{class:"bg-light text-success mb-0"},{default:o(()=>[at,b(" "+D(t.percentageQtyChange)+" % ",1)]),_:1}),b(" vs. previous month ")])]),st])]),_:1})]),_:1})]),_:1}),i(u,{xxl:"3",sm:"6"},{default:o(()=>[i(m,{"no-body":"",class:"card-animate"},{default:o(()=>[i(c,null,{default:o(()=>[e("div",it,[e("div",null,[lt,e("h2",nt,[i(V(N),{duration:5e3,startVal:0,endVal:parseInt(t.totalSoldThisMonth)},null,8,["endVal"])]),e("p",rt,[i(d,{class:"bg-light text-success mb-0"},{default:o(()=>[ot,b(" "+D(t.percentageSoldChange)+"% ",1)]),_:1}),b(" vs. previous month ")])]),dt])]),_:1})]),_:1})]),_:1}),i(u,{xxl:"3",sm:"6"},{default:o(()=>[i(m,{"no-body":"",class:"card-animate"},{default:o(()=>[i(c,null,{default:o(()=>[e("div",ut,[e("div",null,[ct,e("h2",mt,[i(V(N),{duration:7e3,startVal:0,endVal:parseFloat(t.totalProfitMarginThisMonth),decimals:2},null,8,["endVal"]),b("% ")]),e("p",ht,[i(d,{class:"bg-light text-success mb-0"},{default:o(()=>[ft,b(" "+D(t.percentageProfitMarginChange)+"% ",1)]),_:1}),b(" vs. previous month ")])]),pt])]),_:1})]),_:1})]),_:1})]),_:1}),i(g,null,{default:o(()=>[i(u,{lg:"12"},{default:o(()=>[i(m,{"no-body":"",id:"ticketsList"},{default:o(()=>[i(v,{class:"border-0"},{default:o(()=>[gt]),_:1}),i(c,{class:"border border-dashed border-end-0 border-start-0"},{default:o(()=>[e("form",null,[i(g,{class:"g-3"},{default:o(()=>[i(u,{xxl:"5",sm:"12"},{default:o(()=>[e("div",bt,[R(e("input",{type:"text",class:"form-control search bg-light border-light",placeholder:"Search for ticket details or something...","onUpdate:modelValue":n[0]||(n[0]=y=>w.value=y)},null,512),[[H,w.value]]),_t])]),_:1}),i(u,{xxl:"3",sm:"4"},{default:o(()=>[i(V(q),{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=y=>r.value=y),config:h,class:"form-control bg-light border-light",placeholder:"Select date range"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),i(c,{class:"border border-dashed border-end-0 border-start-0"},{default:o(()=>[wt]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Tt as default};
