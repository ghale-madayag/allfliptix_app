import{L as h}from"./mermaid-cf784c66.js";import x from"./widget-c761f893.js";import{b as w,D as B,z as C,r as d,c as I,w as i,j as T,Z as g,q as k,o as D,a as o,u as $,f as e,t as l,h as p}from"./app-ad33c29d.js";import{L as y}from"./main-b305c8af.js";import{P}from"./page-header-83cf93f8.js";import{C as H}from"./flatpickr-3166d7a6.js";import"./vue3-count-to.esm-e8e9e9db.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./logo-light-5db129d6.js";const L="/build/assets/login-bg-f3da318f.webp",O=e("div",{class:"profile-foreground position-relative mx-n4 mt-n4"},[e("div",{class:"profile-wid-bg"},[e("img",{src:L,alt:"",class:"profile-wid-img"})])],-1),S={class:"pt-4 mb-4 mb-lg-3 pb-lg-4 profile-wrapper"},j={class:"p-2"},R={class:"text-white mb-1"},A={class:"text-white text-opacity-75"},F={class:"hstack text-white-50 gap-1"},M=e("i",{class:"ri-building-line me-1 text-white text-opacity-75 fs-16 align-middle"},null,-1),N={class:"me-2"},q=e("i",{class:"ri-map-pin-user-line me-1 text-white text-opacity-75 fs-16 align-middle"},null,-1),U=e("div",{class:"d-flex align-items-center"},[e("h5",{class:"card-title mb-0 flex-grow-1"},"Sold Inventory")],-1),V=e("div",{class:"table-responsive table-card mb-4",id:"grid-table"},null,-1),Q={components:{Layout:y,PageHeader:P,Link:T,Head:g,flatPickr:H}},tt=Object.assign(Q,{__name:"sold_inventory",props:{sold_inventory:Object,event_details:Object,inventory:Object},setup(n){const a=n,b=[{id:1,label:"Quantity",badge:"",icon:"ri-coupon-3-line",counter:a.inventory.qty,decimals:0,suffix:"",prefix:""},{id:2,label:"Total",badge:"",icon:"ri-exchange-dollar-line",counter:parseFloat(a.inventory.total),decimals:2,suffix:"",prefix:"$"},{id:3,label:"Profit",badge:"",icon:"ri-money-dollar-box-line",counter:parseFloat(a.inventory.total_profit),decimals:2,suffix:"",prefix:"$"},{id:4,label:"Profit Margin",badge:"",icon:"ri-pulse-line",counter:parseFloat(a.inventory.profit),decimals:2,suffix:"%",prefix:""},{id:5,label:"Return of Investment",badge:"",icon:"ri-money-dollar-circle-line",counter:a.inventory.roi,decimals:2,prefix:"",separator:".",suffix:"%"}],c=w(null),u=()=>{c.value&&c.value.destroy(),k(()=>{var s,r;const f=Array.isArray((s=a.sold_inventory)==null?void 0:s.rows)?a.sold_inventory.rows:[],_=((r=a.sold_inventory)==null?void 0:r.soldInventoryTotals)||{};c.value=new h({columns:[{name:"Invoice ID",hidden:!1},{name:"Invoice Date",width:"180px",formatter:t=>{if(!t)return"N/A";const m=new Date(t);return new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(m)}},"Qty","In-Hand Date","Unit Cost","Total Cost","Total","Unit Ticket Sales","Profit","%Profi Margin","%ROI"],data:f.map(t=>[t.invoiceId,t.invoiceDate,t.quantity,t.inHandDate,"$"+t.unitCostAverage,"$"+t.cost,"$"+t.total,"$"+t.unitTicketSales,"$"+t.profit,t.profitMargin||0,_.totalROI||0,t.roi]),pagination:{limit:100},search:!1,sort:!0,theme:"mermaid"}).render(document.getElementById("grid-table"))})};return B(()=>{u()}),C(()=>a.sold_inventory,()=>{u()},{deep:!0}),(f,_)=>{const s=d("BCol"),r=d("BRow"),t=d("BCardHeader"),m=d("BCardBody"),v=d("BCard");return D(),I(y,null,{default:i(()=>[o($(g),{title:"Sold Inventory"}),O,e("div",S,[o(r,{class:"g-12"},{default:i(()=>[o(s,null,{default:i(()=>[e("div",j,[e("h3",R,l(n.event_details.name),1),e("p",A,l(n.event_details.date),1),e("div",F,[e("div",null,[M,p(l(n.event_details.venue),1)]),e("div",N,[q,p(l(n.event_details.city)+", "+l(n.event_details.state)+", "+l(n.event_details.country),1)])])])]),_:1})]),_:1})]),o(r,null,{default:i(()=>[o(s,{xl:"12"},{default:i(()=>[o(x,{crmWidgets:b})]),_:1})]),_:1}),o(r,null,{default:i(()=>[o(s,{lg:"12"},{default:i(()=>[o(v,{"no-body":"",id:"ticketsList"},{default:i(()=>[o(t,{class:"border-0 rounded-0"},{default:i(()=>[U]),_:1}),o(m,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[V]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{tt as default};
